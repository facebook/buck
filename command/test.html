<!doctype html><html xmlns="http://www.w3.org/1999/xhtml"><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns#"><title>Buck: buck test</title><link type="image/png" rel="shortcut icon" href="/buck/static/favicon.png" /><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" /><meta http-equiv="content-type" content="text/html;charset=utf-8"><link type="text/css" rel="stylesheet" href="/buck/static/buck.css"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-40185670-1', 'github.io'); ga('send', 'pageview');</script><meta property="og:locale" content="en_US"><meta property="og:title" content="buck test"><meta property="og:site_name" content="Buck: an Android build tool"><meta property="og:image" content="http://facebook.github.io/buck/static/og.png"><meta property="og:type" content="article"><meta property="fb:admins" content="584556688222168"></head><body><div id="fb-root"></div><script>(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=584556688222168"; fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));</script><header class='topbar'><nav class='width'><a href='http://facebook.github.io/buck/'><h1>Buck</h1></a><ul class='menu'><li><a href='/buck/setup/quick_start.html'>Get Started</a><li><a href='https://groups.google.com/forum/#!forum/buck-build'>Group</a><li><a href='/buck/javadoc/'>API</a><li><a href='https://github.com/facebook/buck'>GitHub</a></ul></nav></header><section class='content'><div class='width'><article><h1>buck test</h1><div class="overview">Builds and runs the tests for one or more specified targets:<pre>buck test &#x2F;/javatests/com/example:tests</pre><h2>Parameters</h2><ul class="arglist"><li class="arg"><code>--all</code>  If specified, BUCK will run all tests available in the tree.<li class="arg"><code>--code-coverage</code>  Collects code coverage information while running tests.  Currently, this only works with Java using <a href="http://emma.sourceforge.net/">emma</a>.  After running:<pre>buck test --all --code-coverage</pre><p>The code coverage information can be found in:<pre>buck-out/gen/emma/coverage/</pre><li class="arg"><code>--debug</code>  If specified, the tests will start suspended with a JDWP debug port of 5005. This means that they will not run until a debugger is attached.<li class="arg"><code>--include</code>  Test labels to run with this test.  Labels are a way to group together tests of a particular type and run them together.  For example, a developer could mark all tests that run in less than 100 milliseconds with the <code>fast</code> label, and then use:<pre>buck test --all --include fast</pre>to run only fast tests. See <a href="/buck/rule/java_test.html"><code> java_test()</code></a> for more details.<p>Use multiple arguments to match any label, and <code>+</code> to match a set of labels.  For example to match all the fast tests that are either stable or trustworthy, and aren't unstable:<pre>&hellip; --include fast+stable fast+trustworthy --exclude fast+unstable</pre><li class="arg"><code>--exclude</code>  The inverse of <code>include</code>.  Labels specified with the exclude option won't be run.  For example, if we wanted to run all tests except slow ones, we would run:<pre>buck test --all --exclude slow</pre><li class="arg"><code>--test-selectors</code> <code>(-filter)</code> Select tests to run by name, using a <code>class#method</code> syntax.  All other tests will not be run and test result caching is disabled:<pre>buck test --all --test-selectors 'com.example.MyTest#testX'</pre>Matching is done using <code>java.util.regex</code> regular expressions, and the class part (or method) part can be omitted to match all classes (or methods).<pre>buck test --all --filter 'Foo.*'  # ...every class starting Foo</pre><pre>buck test --all --filter '#testX' # ...run testX in every class</pre>You can exclude tests with <code>!</code>, and if all your test selectors are exclusive, then the default is to run everything except those tests:<pre>buck test --all --test-selectors '!MyTest'  # ...all except MyTest</pre>Test selectors can also be read from a file by formatting them as <code>@/path/to/file</code>.  The file should contain one test selector per line.<p>The first matching selector decides whether to include or exclude a test. The full logic is described in the <code>--help</code>.<li class="arg"><code>--dry-run</code>  Print the test rules that will be matched by command line arguments such as <code>--include</code> and <code>--exclude</code>, but exit before building or running tests.<li class="arg"><code>--num-threads</code>  The number of threads that buck should use when executing the build. This defaults to 1.25 times the number of processors in the system (on systems with hyperthreading, this means that each core is counted twice). The number of active threads may not always be equal to this argument.<li class="arg"><code>--ignore-when-dependencies-fail</code>  If a library is broken its tests are probably failing.  If another library depends on that library and its tests are also failing, it is probably because the dependency has a bug.<p>For example, if the library <code>HouseBuilder</code> depends on <code>Bricks</code> and the <code>Bricks</code> library is broken, it will probably cause its own tests as well as <code>HouseBuilder</code>'s to fail.<p>Accordingly, if the libraries are tested respectively by <code>HouseBuilderTest</code> and <code>BricksTest</code>, and both tests fail then only the error for <code>BricksTest</code> is printed; the error for <code>HouseBuilderTest</code> is ignored.<p>You'll still be notified that <code>HouseBuilderTest</code> is failing, and running the tests again without this option will show the cached test result (and error) in full.<li class="arg"><code>--verbose</code> <code>(-v)</code> How verbose logging to the console should be, with 1 as the minimum and 10 as the most verbose.<li class="arg"><code>--xml</code>  If specified, Buck will write the test results as XML to the location specified.  For example:<pre>buck test --all --xml testOutput.xml</pre></ul></div></article><nav><h3>Getting Started</h3><ul><li><a href="/buck/">Overview</a><li><a href="/buck/setup/quick_start.html">Quick Start</a><li><a href="/buck/setup/install.html">Downloading and Installing Buck</a></ul><h3>About</h3><ul><li><a href="/buck/concept/what_makes_buck_so_fast.html">What Makes Buck so Fast?</a><li><a href="/buck/concept/troubleshooting.html">Troubleshooting</a><li><a href="/buck/about/performance_tuning.html">Performance Tuning</a><li><a href="/buck/concept/faq.html">FAQ</a></ul><h3>Concepts</h3><ul><li><a href="/buck/concept/build_rule.html">Build Rule</a><li><a href="/buck/concept/build_target.html">Build Target</a><li><a href="/buck/concept/build_file.html">Build File</a><li><a href="/buck/concept/buckversion.html">.buckversion</a><li><a href="/buck/concept/nobuckcheck.html">.nobuckcheck</a><li><a href="/buck/concept/buckconfig.html">.buckconfig</a><li><a href="/buck/concept/build_target_pattern.html">Build Target Pattern</a><li><a href="/buck/concept/visibility.html">Visibility</a></ul><h3>Build Rules</h3><ul><li><a href="/buck/rule/android_binary.html">android_binary()</a><li><a href="/buck/rule/android_library.html">android_library()</a><li><a href="/buck/rule/android_resource.html">android_resource()</a><li><a href="/buck/rule/apk_genrule.html">apk_genrule()</a><li><a href="/buck/rule/gen_aidl.html">gen_aidl()</a><li><a href="/buck/rule/genrule.html">genrule()</a><li><a href="/buck/rule/java_binary.html">java_binary()</a><li><a href="/buck/rule/java_library.html">java_library()</a><li><a href="/buck/rule/java_test.html">java_test()</a><li><a href="/buck/rule/keystore.html">keystore()</a><li><a href="/buck/rule/ndk_library.html">ndk_library()</a><li><a href="/buck/rule/prebuilt_jar.html">prebuilt_jar()</a><li><a href="/buck/rule/prebuilt_native_library.html">prebuilt_native_library()</a><li><a href="/buck/rule/project_config.html">project_config()</a></ul><h3>Functions</h3><ul><li><a href="/buck/function/genfile.html">genfile()</a><li><a href="/buck/function/glob.html">glob()</a><li><a href="/buck/function/include_defs.html">include_defs()</a></ul><h3>Commands</h3><ul><li><a href="/buck/command/audit.html">buck audit</a><li><a href="/buck/command/build.html">buck build</a><li><a href="/buck/command/clean.html">buck clean</a><li><a href="/buck/command/install.html">buck install</a><li><a href="/buck/command/project.html">buck project</a><li><a href="/buck/command/quickstart.html">buck quickstart</a><li><a href="/buck/command/targets.html">buck targets</a><li><a href="/buck/command/test.html">buck test</a><li><a href="/buck/command/uninstall.html">buck uninstall</a><li><a href="/buck/command/buckd.html">buckd</a></ul><h3>Extending Buck</h3><ul><li><a href="/buck/extending/macros.html">Custom Macros</a><li><a href="/buck/extending/rules.html">Custom Rules</a></ul><h3>Contributing to Buck</h3><ul><li><a href="https://groups.google.com/group/buck-build">Discussion Group</a><li><a href="https://github.com/facebook/buck/issues/new">Report a Bug</a><li><a href="/buck/contributing/development.html">Development Workflow</a><li><a href="/buck/contributing/codestyle.html">Code Style</a><li><a href="/buck/javadoc">API</a><li><a href="https://github.com/facebook/buck">Browse the Source Code</a></ul></ul></nav></div></section><footer><div class='width'>&copy; Copyright Facebook, 2013 -</div></footer></body></html>