load("//tools/build_rules:java_rules.bzl", "standard_java_test")

standard_java_test(
    name = "computation",
    with_test_data = True,
    deps = [
        "//src/com/facebook/buck/core/build/engine/impl:impl",
        "//src/com/facebook/buck/core/model/actiongraph/computation:computation",
        "//src/com/facebook/buck/core/rules/transformer/impl:impl",
        "//src/com/facebook/buck/core/sourcepath/resolver/impl:impl",
        "//src/com/facebook/buck/core/toolchain/tool/impl:impl",
        "//src/com/facebook/buck/core/toolchain/toolprovider/impl:impl",
        "//src/com/facebook/buck/cxx:rules",
        "//src/com/facebook/buck/cxx/toolchain:toolchain",
        "//src/com/facebook/buck/cxx/toolchain/linker:linker",
        "//src/com/facebook/buck/event:event",
        "//src/com/facebook/buck/features/filebundler:filebundler",
        "//src/com/facebook/buck/features/lua:lua",
        "//src/com/facebook/buck/features/python:python",
        "//src/com/facebook/buck/features/python/toolchain:toolchain",
        "//src/com/facebook/buck/rules/args:args",
        "//src/com/facebook/buck/rules/coercer:coercer",
        "//src/com/facebook/buck/rules/coercer:interface",
        "//src/com/facebook/buck/rules/keys:keys",
        "//src/com/facebook/buck/rules/keys/config:config",
        "//src/com/facebook/buck/rules/macros:macros",
        "//src/com/facebook/buck/util:util",
        "//src/com/facebook/buck/util/trace:trace",
        "//src/com/facebook/buck/util/types:types",
        "//src/com/facebook/buck/versions:types",
        "//src/com/facebook/buck/versions:versions",
        "//test/com/facebook/buck/cli:testutil",
        "//test/com/facebook/buck/core/cell:testutil",
        "//test/com/facebook/buck/core/model:testutil",
        "//test/com/facebook/buck/core/model/actiongraph/computation:testutil",
        "//test/com/facebook/buck/core/model/targetgraph:testutil",
        "//test/com/facebook/buck/core/sourcepath:testutil",
        "//test/com/facebook/buck/cxx:testutil",
        "//test/com/facebook/buck/cxx/toolchain:testutil",
        "//test/com/facebook/buck/event:testutil",
        "//test/com/facebook/buck/features/filegroup:testutil",
        "//test/com/facebook/buck/features/lua:testutil",
        "//test/com/facebook/buck/features/python:builders",
        "//test/com/facebook/buck/features/python:testutil",
        "//test/com/facebook/buck/jvm/java:testutil",
        "//test/com/facebook/buck/rules:testutil",
        "//test/com/facebook/buck/rules/keys/config:testutil",
        "//test/com/facebook/buck/rules/macros:testutil",
        "//test/com/facebook/buck/shell:testutil",
        "//test/com/facebook/buck/testutil:testutil",
        "//test/com/facebook/buck/testutil/integration:util",
        "//test/com/facebook/buck/util/timing:testutil",
        "//test/com/facebook/buck/versions:testutil",
        "//third-party/java/junit:junit",
        "//third-party/java/nailgun:nailgun",
    ],
)

java_library(
    name = "testutil",
    srcs = glob(
        ["*.java"],
        exclude = [
            "*Test.java",
        ],
    ),
    exported_deps = [
        "//src/com/facebook/buck/core/model/actiongraph/computation:computation",
        "//src/com/facebook/buck/util:util",
        "//test/com/facebook/buck/event:testutil",
        "//test/com/facebook/buck/rules/keys/config:testutil",
    ],
    visibility = ["//test/..."],
    deps = [
        "//test/com/facebook/buck/core/cell:testutil",
    ],
)
